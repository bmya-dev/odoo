// Attachment Icons (common for chat thread and chat composer)
// ------------------------------------------------------------------
$o-mail-attachment-image-size: 38px;
$o-mail-attachment-margin: 5px;

.o_attachments_list, .o_attachments_previews {
    margin: 0 (-$o-mail-attachment-margin) 0;
    @include o-flex-display;
    @include o-flex-flow(row, wrap);
}

.o_attachment {
    position: relative;
    width: 100%;
    padding: $o-mail-attachment-margin;

    @media (min-width: $screen-sm-min) {
        width: 50%;
    }
    @media (min-width: $screen-md-min) {
        width: 25%;
    }

    .o_attachment_wrap {
        overflow: hidden;
        position: relative;
        border-bottom: 1px solid rgba(black, 0.1);
        border-radius: 2px;
        padding: 4px 6px 0 4px;
        background-color: rgba(black, 0.05);
    }

    &.o_attachment_editable .o_attachment_wrap  {
        padding-right: 40px;
    }

    .o_image {
        width: $o-mail-attachment-image-size;
        height: $o-mail-attachment-image-size;
        image-orientation: from-image; // Only supported in Firefox
        &.o_hover {
            @include o-hover-opacity($default-opacity: 1, $hover-opacity: 0.7);
        }
    }

    .o_attachment_view {
        cursor: zoom-in;
    }

    .caption {
        @include o-text-overflow(block);

        a {
            @include o-hover-text-color($default-color: $o-main-text-color, $hover-color: $headings-color);
        }
    }

    .o_attachment_progress_bar {
        display: none;
    }

    .o_attachment_uploaded, .o_attachment_delete {
        @include o-position-absolute(0, 0, 0, $left: auto);
        @include o-flex-display();
        @include o-align-items(center);
        @include o-justify-content(center);
        width: 45px;
    }

    .o_attachment_delete {
        background: desaturate($brand-primary, 50%);
        color: white;
        cursor: pointer;
        font-size: 20px;
        @include o-transform(translateX(100%));
        @include o-transition(all, 0.3s);

        &:hover {
            background: $brand-primary;
        }
    }

    &.o_attachment_uploading {
        .o_attachment_progress_bar {
            display: inline-block;
            margin: 0 0 0 8px;
            border-radius: 2px;
            vertical-align: bottom;

            > div {
                font-size: 11px;
                padding: 0 7px;
            }
        }

        .o_attachment_delete, .o_attachment_uploaded {
            display: none;
        }
    }

    &:hover .o_attachment_delete {
        @include o-transition(all, 0.1s);
        @include o-transform(translateX(0));
    }
}
.o_attachments_previews {
    > .o_attachment {
        width: 50%;

        @media (min-width: $screen-sm-min) {
            width: percentage(1/3);
        }
        @media (min-width: $screen-md-min) {
            width: percentage(1/4);
        }
        @media (min-width: $screen-lg-min) {
            width: percentage(1/6);
        }

        .o_attachment_wrap {
            padding: 0;
            border-radius: 2px;
            border: 1px solid $gray-lighter-darker;
        }

        .o_image_box {
            overflow: hidden;
            padding-top: 75%;

            .o_attachment_image {
                @include o-position-absolute(0, 0, 0, 0);
                background-size: cover;
                background-position: center;
                @include o-transform(scale(1.05));
                @include o-transition(all, 0.3s);
            }

            &:hover .o_attachment_image {
                @include o-transform(scale(1));
            }
        }

        .o_image_overlay {
            @include o-position-absolute($top: 0, $left: 0, $right:0, $bottom:0);
            @include o-hover-opacity($default-opacity: 0, $hover-opacity: 1);
            @include o-linear-gradient(180deg, rgba(black, 0.2), rgba(black, 0.9));
            @include o-transition(all, 0.3s);
            padding: 10px;

            .o_attachment_title {
                @include o-position-absolute($bottom: 7px);
                width: 80%;
                @include o-text-overflow(inline-block);
                font-size: $font-size-small;
            }

            .o_attachment_download {
                @include o-position-absolute($right: 7px, $bottom:7px);
            }
        }
    }
}

<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <div t-name="mail.wip.widget.DiscussSidebarItem" owl="1"
         class="o_item"
         t-att-data-thread-local-id="$thread"
         t-attf-class="{{ $thread === 'mail.box_starred' ? 'o_starred_box' : '' }}"
         t-on-click="_onClick">
        <div class="o_active_indicator" t-att-class="isActive ? 'o_active' : ''"/>
        <div class="o_icon">
            <t t-if="thread.channel_type === 'channel'">
                <div t-if="thread.public === 'private'" class="fa fa-lock"/>
                <div t-else="" class="fa fa-hashtag"/>
            </t>
            <t t-elif="thread.channel_type === 'chat'">
                <div t-if="directPartner.im_status === 'online'"
                     class="fa fa-circle o_online" title="Online"/>
                <div t-elif="directPartner.im_status === 'offline'"
                     class="fa fa-circle-o o_offline" title="Offline"/>
                <div t-elif="directPartner.im_status === 'away'"
                     class="fa fa-circle o_away" title="Away"/>
                <div t-elif="thread.$typingMembers.includes(thread.$directPartner)"
                     class="o_typing" title="Is typing...">
                    <span class="o_dot"/>
                    <span class="o_dot"/>
                    <span class="o_dot"/>
                </div>
            </t>
            <t t-elif="thread._model === 'mail.box'">
                <div t-if="$thread === 'mail.box_inbox'" class="fa fa-inbox"/>
                <div t-elif="$thread === 'mail.box_starred'" class="fa fa-star-o"/>
                <div t-elif="$thread === 'mail.box_moderation'" class="fa fa-envelope"/>
            </t>
        </div>
        <div t-if="thread.channel_type === 'chat' and state.renaming" class="o_editable_name">
            <t t-widget="EditableText"
               t-props="{ placeholder: directPartner.name, value: name }"
               t-on-cancel="_onCancelRenaming"
               t-on-validate="_onRename"/>
        </div>
        <div t-else=""
             class="o_name"
             t-att-class="thread.message_unread_counter > 0 ? 'o_unread' : ''">
            <t t-esc="name"/>
        </div>
        <div class="o_autogrow"/>
        <div t-if="thread._model !== 'mail.box'"
            class="o_commands">
            <t t-if="thread.channel_type === 'channel'">
                <div class="o_settings o_command fa fa-cog"
                     aria-label="Channel settings"
                     role="img"
                     title="Channel settings"
                     t-on-click="_onClickSettings"/>
                <div t-if="!thread.message_needaction_counter and !thread.group_based_subscription"
                     class="o_leave o_command fa fa-times"
                     aria-label="Leave this channel"
                     role="img"
                     title="Leave this channel"
                     t-on-click="_onClickLeave"/>
            </t>
            <t t-elif="thread.channel_type === 'chat'">
                <div class="o_rename o_command fa fa-cog"
                     aria-label="Rename conversation"
                     role="img"
                     title="Rename conversation"
                     t-on-click="_onClickRename"/>
                <div t-if="!thread.message_unread_counter"
                     class="o_unpin o_command fa fa-times"
                     aria-label="Unpin conversation"
                     role="img"
                     title="Unpin conversation"
                     t-on-click="_onClickUnpin"/>
            </t>
        </div>
        <div t-if="counter > 0" class="o_counter badge badge-pill">
            <t t-esc="counter"/>
        </div>
    </div>

</templates>

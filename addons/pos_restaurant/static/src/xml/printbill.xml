<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="BillScreenWidget">
        <div class='receipt-screen screen'>
            <div class='screen-content'>
                <div class='top-content'>
                    <span class='button back'>
                        <i class='fa fa-angle-double-left'></i>
                        Back
                    </span>
                    <h1>Bill Printing</h1>
                    <span class='button next'>
                        Ok 
                        <i class='fa fa-angle-double-right'></i>
                    </span>
                </div>
                <div class="centered-content">
                    <div class="button print">
                        <i class='fa fa-print'></i> Print 
                    </div>
                    <div class="pos-receipt-container">
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="PrintBillButton">
        <span class="control-button order-printbill">
            <i class="fa fa-print"></i>
            Bill
        </span>
    </t>

    <t t-name="BillReceipt">
        <div class="receipt" style="width: 80mm;">
            <div t-if='receipt.company.logo'>
                <img t-att-src='receipt.company.logo' alt="Logo" style="width: 60%; display: block; margin: 0 auto;"/>
            </div>
            <div t-if='!receipt.company.logo'>
                <h1 style="text-align: center;">
                    <t t-esc='receipt.company.name' />
                </h1>
            </div>

            <div style="text-align: center; font-size: 75%;">
                <t t-if='receipt.shop.name'>
                    <t t-esc='receipt.shop.name' /><br/>
                </t>
                <t t-if='receipt.company.contact_address'>
                    <t t-esc='receipt.company.contact_address' /><br/>
                </t>
                <t t-if='receipt.company.phone'>
                    Tel:<t t-esc='receipt.company.phone' /><br/>
                </t>
                <t t-if='receipt.company.vat'>
                    <t t-esc="receipt.company.vat_label or 'Tax ID'"/>:<t t-esc='receipt.company.vat' /><br/>
                </t>
                <t t-if='receipt.company.email'>
                    <t t-esc='receipt.company.email' /><br/>
                </t>
                <t t-if='receipt.company.website'>
                    <t t-esc='receipt.company.website' /><br/>
                </t>
                <t t-if='receipt.header'>
                    <t t-esc='receipt.header' /><br/>
                </t>
                <t t-if='receipt.cashier'>
                    <span class='cashier'>
                        --------------------------------
                        <br/>
                        Served by <t t-esc='receipt.cashier' /><br/>
                    </span>
                </t>
            </div>
            <br/>

            <!-- Orderlines -->

            <div class='orderlines'>
                <t t-foreach='receipt.orderlines' t-as='line'>
                    <t t-set='simple' t-value='line.discount === 0 and line.unit_name === "Unit(s)" and line.quantity === 1' />
                    <t t-if='simple'>
                        <t t-esc='line.product_name' />
                        <span t-esc='widget.format_currency_no_symbol(line.price_display)' style="float: right;"/>
                        <br/>
                    </t>
                    <t t-if='!simple'>
                        <t t-esc='line.product_name' />
                        <br/>
                        <t t-if='line.discount !== 0'>
                            <div style="padding-left: 2em;">
                                Discount:
                                <t t-esc='line.discount'/>%
                            </div>
                        </t>
                        <div style="padding-left: 2em;">
                            <t t-esc='Math.round(line.quantity * 1000) / 1000' />
                            <t t-if='line.unit_name !== "Unit(s)"' t-esc='line.unit_name'/>
                            x 
                            <t t-esc='widget.format_currency_no_symbol(line.price)'/>
                            <span t-esc='widget.format_currency_no_symbol(line.price_display)' class="price-display" style="float:right;"/>
                        </div>
                    </t>
                </t>
            </div>

            <!-- Subtotal -->
            <t t-set='taxincluded' t-value='Math.abs(receipt.subtotal - receipt.total_with_tax) &lt;= 0.000001' />
            <t t-if='!taxincluded'>
                <div style="float:right;">--------</div>
                <br/>
                Subtotal
                <span t-esc='widget.format_currency_no_symbol(receipt.subtotal)' style="float:right;"/>
                <div t-foreach='receipt.tax_details' t-as='tax'>
                    <t t-esc='tax.name' />
                    <span t-esc='widget.format_currency_no_symbol(tax.amount)' style="float:right;"/>
                </div>
            </t>

            <!-- Total -->
            <div style="float:right;">--------</div>
            <br/>
            <div style="font-size: 125%">
                <span style="padding-left: 5em;">TOTAL</span>
                <span t-esc='widget.format_currency_no_symbol(receipt.total_with_tax)' style="float:right;"/>
            </div>

            <!-- Extra Payment Info -->

            <p t-if='receipt.total_discount'>
                Discounts
                <span t-esc='widget.format_currency_no_symbol(receipt.total_discount)' style="float:right;"/>
            </p>
            <p t-if='taxincluded'>
                <t t-foreach='receipt.tax_details' t-as='tax'>
                    <t t-esc='tax.name' />
                    <span t-esc='widget.format_currency_no_symbol(tax.amount)' style="float:right;"/>
                    <br/>
                </t>
            </p>

            <!-- Footer -->
            <p t-if='receipt.footer_html' t-raw='receipt.footer_html' style="text-align: center;"/>
            <p t-if='!receipt.footer_html and receipt.footer' t-esc='receipt.footer' style="text-align: center;"/>

            <p class="ticket-date" style="text-align: center; font-size: 75%;">
                <t t-esc='receipt.name' />
                <br/>
                <t t-esc='receipt.date.localestring' />
            </p>

        </div>
    </t>

</templates>
